<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>{{title}}</title>
        <link rel="stylesheet" href="../assets/css/test.css"/>
        <!-- Include Quill stylesheet -->
        <link href="http://cdn.quilljs.com/1.1.3/quill.snow.css" rel="stylesheet">

        <script type="text/javascript" src="../assets/Scripts/jquery.min.js"></script>
        <script type="text/javascript" src="../assets/Scripts/test.js"></script>

        <script src="http://cdn.quilljs.com/1.1.3/quill.min.js"></script>
    </head>
    <body>



        <h1 class="title">{{title}}
            <div class="title-tools">
              Welcome, {{username}}.
                <button type="button" name="button" onclick="location.href='/logout'">Async logout</button>
            </div>
        </h1>
        <div class="section">
          <div class="title">Editor</div>
          <div class="col-6">
            <div id="snow-wrapper">
<div id="snow-container">
<div class="toolbar ql-toolbar ql-snow">
<span class="ql-formats">
<span class="ql-header ql-picker"><span class="ql-picker-label"><svg viewBox="0 0 18 18"> <polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"></polygon> <polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"></polygon> </svg></span><span class="ql-picker-options"><span class="ql-picker-item" data-value="1" data-label="Heading"></span><span class="ql-picker-item" data-value="2" data-label="Subheading"></span><span class="ql-picker-item" data-label="Normal"></span></span></span><select class="ql-header" style="display: none;">
<option value="1">Heading</option>
<option value="2">Subheading</option>
<option selected="">Normal</option>
</select>
<span class="ql-font ql-picker"><span class="ql-picker-label"><svg viewBox="0 0 18 18"> <polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"></polygon> <polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"></polygon> </svg></span><span class="ql-picker-options"><span class="ql-picker-item" data-label="Sailec Light"></span><span class="ql-picker-item" data-value="sofia" data-label="Sofia Pro"></span><span class="ql-picker-item" data-value="slabo" data-label="Slabo 27px"></span><span class="ql-picker-item" data-value="roboto" data-label="Roboto Slab"></span><span class="ql-picker-item" data-value="inconsolata" data-label="Inconsolata"></span><span class="ql-picker-item" data-value="ubuntu" data-label="Ubuntu Mono"></span></span></span><select class="ql-font" style="display: none;">
<option selected="">Sailec Light</option>
<option value="sofia">Sofia Pro</option>
<option value="slabo">Slabo 27px</option>
<option value="roboto">Roboto Slab</option>
<option value="inconsolata">Inconsolata</option>
<option value="ubuntu">Ubuntu Mono</option>
</select>
</span>
<span class="ql-formats">
<button class="ql-bold" type="button"><svg viewBox="0 0 18 18"> <path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"></path> <path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"></path> </svg></button>
<button class="ql-italic" type="button"><svg viewBox="0 0 18 18"> <line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"></line> <line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"></line> <line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"></line> </svg></button>
<button class="ql-underline" type="button"><svg viewBox="0 0 18 18"> <path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"></path> <rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"></rect> </svg></button>
</span>
<span class="ql-formats">
<button class="ql-list" value="ordered" type="button"><svg viewBox="0 0 18 18"> <line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"></line> <line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"></line> <line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"></line> <line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"></line> <path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"></path> <path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"></path> <path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"></path> </svg></button>
<button class="ql-list" value="bullet" type="button"><svg viewBox="0 0 18 18"> <line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"></line> <line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"></line> <line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"></line> <line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"></line> <line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"></line> <line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"></line> </svg></button>
<span class="ql-align ql-picker ql-icon-picker"><span class="ql-picker-label"><svg viewBox="0 0 18 18"> <line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"></line> <line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"></line> <line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"></line> </svg></span><span class="ql-picker-options"><span class="ql-picker-item"><svg viewBox="0 0 18 18"> <line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"></line> <line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"></line> <line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"></line> </svg></span><span class="ql-picker-item" data-value="center"><svg viewBox="0 0 18 18"> <line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"></line> <line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"></line> <line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"></line> </svg></span><span class="ql-picker-item" data-value="right"><svg viewBox="0 0 18 18"> <line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"></line> <line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"></line> <line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"></line> </svg></span><span class="ql-picker-item" data-value="justify"><svg viewBox="0 0 18 18"> <line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"></line> <line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"></line> <line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"></line> </svg></span></span></span><select class="ql-align" style="display: none;">
<option selected=""></option>
<option value="center"></option>
<option value="right"></option>
<option value="justify"></option>
</select>
</span>
<span class="ql-formats">
<button class="ql-link" type="button"><svg viewBox="0 0 18 18"> <line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"></line> <path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"></path> <path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"></path> </svg></button>
<button class="ql-image" type="button"><svg viewBox="0 0 18 18"> <rect class="ql-stroke" height="10" width="12" x="3" y="4"></rect> <circle class="ql-fill" cx="6" cy="7" r="1"></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg></button>
<button class="ql-video" type="button"><svg viewBox="0 0 18 18"> <rect class="ql-stroke" height="12" width="12" x="3" y="3"></rect> <rect class="ql-fill" height="12" width="1" x="5" y="3"></rect> <rect class="ql-fill" height="12" width="1" x="12" y="3"></rect> <rect class="ql-fill" height="2" width="8" x="5" y="8"></rect> <rect class="ql-fill" height="1" width="3" x="3" y="5"></rect> <rect class="ql-fill" height="1" width="3" x="3" y="7"></rect> <rect class="ql-fill" height="1" width="3" x="3" y="10"></rect> <rect class="ql-fill" height="1" width="3" x="3" y="12"></rect> <rect class="ql-fill" height="1" width="3" x="12" y="5"></rect> <rect class="ql-fill" height="1" width="3" x="12" y="7"></rect> <rect class="ql-fill" height="1" width="3" x="12" y="10"></rect> <rect class="ql-fill" height="1" width="3" x="12" y="12"></rect> </svg></button>
</span>
<span class="ql-formats">
<button class="ql-formula" type="button"><svg viewBox="0 0 18 18"> <path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"></path> <rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"></rect> <path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"></path> </svg></button>
<button class="ql-code-block" type="button"><svg viewBox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"></line> </svg></button>
</span>
<span class="ql-formats">
<button class="ql-clean" type="button"><svg class="" viewBox="0 0 18 18"> <line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"></line> <line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"></line> <line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"></line> <line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"></line> <rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"></rect> </svg></button>
</span>
</div>
<div class="editor ql-container ql-snow"><div class="ql-editor" contenteditable="true"><h1 class="ql-align-center">Quill Rich Text Editor</h1><p><br></p><p>Quill is a free, <a href="https://github.com/quilljs/quill/" target="_blank">open source</a> WYSIWYG editor built for the modern web. With its <a href="http://quilljs.com/docs/modules/" target="_blank">modular architecture</a> and expressive <a href="http://quilljs.com/docs/api/" target="_blank">API</a>, it is completely customizable to fit any need.</p><p><br></p><iframe class="ql-video ql-align-center" frameborder="0" allowfullscreen="true" src="https://www.youtube.com/embed/QHH3iSeDBLo?showinfo=0" height="238" width="560"></iframe><p><br></p><p><br></p><h2 class="ql-align-center">Getting Started is Easy</h2><p><br></p><pre class="ql-syntax" spellcheck="false"><span class="hljs-comment">// &lt;link href="https://cdn.quilljs.com/1.1.3/quill.snow.css" rel="stylesheet"&gt;</span>
<span class="hljs-comment">// &lt;script src="https://cdn.quilljs.com/1.1.3/quill.min.js" type="text/javascript"&gt;&lt;/script&gt;</span>

<span class="hljs-keyword">var</span> quill = <span class="hljs-keyword">new</span> Quill(<span class="hljs-string">'#editor'</span>, {
  modules: {
    toolbar: <span class="hljs-string">'#toolbar'</span>
  },
  theme: <span class="hljs-string">'snow'</span>
});

<span class="hljs-comment">// Open your browser's developer console to try out the API!</span>
</pre><p><br></p><p><br></p><p class="ql-align-center"><strong>Built with</strong></p><p class="ql-align-center">&nbsp;<span class="ql-formula" data-value="x^2 + (y - \sqrt[3]{x^2})^2 = 1" contenteditable="false"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mo>(</mo><mi>y</mi><mo>−</mo><mroot><mrow><msup><mi>x</mi><mn>2</mn></msup></mrow><mrow><mn>3</mn></mrow></mroot><msup><mo>)</mo><mn>2</mn></msup><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">x^2 + (y - \sqrt[3]{x^2})^2 = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height: 0.955054em;"></span><span class="strut bottom" style="height: 1.20505em; vertical-align: -0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span class="" style="top: -0.363em; margin-right: 0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span class="" style="font-size: 0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span class="" style="font-size: 0em;">​</span></span>​</span></span></span><span class="mbin">+</span><span class="mopen">(</span><span class="mord mathit" style="margin-right: 0.03588em;">y</span><span class="mbin">−</span><span class="sqrt mord"><span class="root"><span class="vlist"><span class="" style="top: -0.522065em;"><span class="fontsize-ensurer reset-size5 size5"><span class="" style="font-size: 0em;">​</span></span><span class="reset-textstyle scriptscriptstyle uncramped"><span class="mord scriptscriptstyle uncramped"><span class="mord mathrm">3</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span class="" style="font-size: 0em;">​</span></span>​</span></span></span><span class="sqrt-sign" style="top: -0.115054em;"><span class="style-wrap reset-textstyle textstyle uncramped">√</span></span><span class="vlist"><span class="" style="top: 0em;"><span class="fontsize-ensurer reset-size5 size5"><span class="" style="font-size: 1em;">​</span></span><span class="mord textstyle cramped"><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span class="" style="top: -0.289em; margin-right: 0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span class="" style="font-size: 0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span class="" style="font-size: 0em;">​</span></span>​</span></span></span></span></span><span class="" style="top: -0.875054em;"><span class="fontsize-ensurer reset-size5 size5"><span class="" style="font-size: 1em;">​</span></span><span class="reset-textstyle textstyle uncramped sqrt-line"></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span class="" style="font-size: 1em;">​</span></span>​</span></span></span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span class="" style="top: -0.363em; margin-right: 0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span class="" style="font-size: 0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span class="" style="font-size: 0em;">​</span></span>​</span></span></span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span></span>&nbsp;</p><p><br></p></div><div class="ql-clipboard" contenteditable="true" tabindex="-1"></div><div class="ql-tooltip ql-hidden" style="left: 162.797px; top: 92px; margin-top: 10px;"><a class="ql-preview" target="_blank" href="https://github.com/quilljs/quill/">https://github.com/quilljs/quill/</a><input type="text" data-formula="e=mc^2" data-link="quilljs.com" data-video="Embed URL"><a class="ql-action"></a><a class="ql-remove"></a></div></div>
</div>
</div>


            <!-- Initialize Quill editor -->
            <script>
              var snowEditor = new Quill('#snow-container .editor', {
                bounds: '#snow-container .editor',
                modules: {
                  'formula': true,
                  'syntax': true,
                  'toolbar': '#snow-container .toolbar'
                },
                theme: 'snow'
              });
            </script>
          </div>
        </div>

        <div class="section">
          <div class="title">User List</div>
          <table class="table">
              <colgroup>
                  <col style="width:10%">
                  <col style="width:30%">
                  <col style="width:20%">
                  <col style="width:10%">
                  <col style="width:5%">
                  <col style="width:5%">
                  <col style="width:10%">
              </colgroup>
              <thead>
                  <tr>
                      <th>name</th>
                      <th>pwd</th>
                      <th>email</th>
                      <th>tel</th>
                      <th>gender</th>
                      <th>limit</th>
                      <th></th>
                  </tr>
              </thead>
              <tbody id="user-list"></tbody>
          </table>
        </div>
        <!-- :end section -->


        <div class="section">
          <div class="title">Form</div>
          <div class="col-3">
            <div class="form">
              <h1 class="form-title">Update</h1>
                <form class="edit-form" action="/api/users/" method="post">
                    <div class="row is-wide">
                        <label for="">Id</label>
                        <input type="text" name="id" value="" disabled>
                    </div>
                    <div class="row is-wide">
                        <label for="">Username</label>
                        <input type="text" name="name" value="" disabled>
                    </div>
                    <div class="row is-wide">
                        <label for="">Password</label>
                        <input type="text" name="pwd" value="12345611">
                    </div>
                    <div class="row is-wide">
                        <label for="">email</label>
                        <input type="text" name="email" value="">
                    </div>
                    <div class="row is-wide">
                        <label for="">tel</label>
                        <input type="text" name="tel" value="">
                    </div>
                    <div class="row is-wide">
                      <label for="">Limit</label>
                      <input type="text" name="limit" value="">
                    </div>
                    <div class="row is-wide">
                        <input type="radio" name="gender" value="man" checked="checked"><label for="">Man</label>
                        <input type="radio" name="gender" value="woman"><label for="">Woman</label>
                    </div>
                </form>
                <div class="row">
                  <button id="submit-update" type="button" name="button">Async Submit</button>
                </div>
            </div>
            <!-- :end form -->
          </div>
          <div class="col-3">
            <div class="form">
              <h1 class="form-title">Create</h1>
                <form class="create-form" action="/api/users/" method="post">
                    <div class="row is-wide">
                        <label for="">Username</label>
                        <input type="text" name="name" value="carl">
                    </div>
                    <div class="row is-wide">
                        <label for="">Password</label>
                        <input type="text" name="pwd" value="12345611">
                    </div>
                    <div class="row is-wide">
                        <label for="">email</label>
                        <input type="text" name="email" value="ly@gmail.com">
                    </div>
                    <div class="row is-wide">
                        <label for="">tel</label>
                        <input type="text" name="tel" value="(626)8584512">
                    </div>
                    <div class="row is-wide">
                      <label for="">Limit</label>
                      <input type="text" name="limit" value="1">
                    </div>
                    <div class="row is-wide">
                        <input type="radio" name="gender" value="man" checked="checked"><label for="">Man</label>
                        <input type="radio" name="gender" value="woman"><label for="">Woman</label>
                    </div>
                </form>
                <div class="row">
                  <button id="submit-create" type="button" name="button">Async Submit</button>
                </div>
            </div>
            <!-- :end form -->
          </div>
          <div class="col-3">
            <div class="form">
              <h1 class="form-title">Delete</h1>
                <form action="/api/users" method="delete">
                    <div class="row is-wide">
                      <label for="">Name</label>
                      <input id="delete-id" type="text" name="id" value="">
                    </div>
                </form>
                <div class="row">
                  <button id="submit-del">Async Submit</button>
                </div>
            </div>
            <!-- :end form -->
          </div>
          <div class="col-3">
            <div class="form">
              <h1 class="form-title">Upload Photo</h1>
                <form action="/upload" method="post" enctype="multipart/form-data">
                    <div class="row is-wide">
                      <label for="">File</label>
                      <input id="file" type="file" name="photos" multiple>
                    </div>
                </form>
                <div class="row">
                  <button id="submit-photo">Async Submit</button>
                </div>
            </div>
            <!-- :end form -->
          </div>
        </div>
        <!-- :end section -->


    </body>
</html>
<script type="text/javascript">
// :start submit photo
$("#submit-photo").click(function(){
      var data = new FormData();
      $.each($('#file')[0].files, function(i, file) {
          data.append("photos", file);
      });

      $.ajax({
          url: "/upload",
          type: 'POST',
          contentType: 'multipart/form-data',
          data: data,
          processData: false, // Don't process the files
          contentType: false, // Set content type to false as jQuery will tell the server its a query string request
          success: function(data, textStatus, jqXHR){
            send(data);
          },
          error: function(jqXHR, textStatus, errorThrown){
          }
      });
})


// :start submit authenticate
$("#submit-auth").click(function(){
  var data = {
    username: $(".auth-form [name='username']").val(),
    password: $(".auth-form [name='password']").val()
  };

    $.get("/admin",data,function(data){
        console.log(data);
    })
})

// :start submit delete
$("#submit-del").click(function(){
    var id = $("#delete-id").val();
    $.ajax({
          url: '/api/users/'+id,
          type: 'DELETE',
          success: function(result) {
            console.log(result);
              // Do something with the result
          }
      });
});

// :start submit create
$("#submit-create").click(function(){
    $.ajax({
          url: '/api/users/',
          data:{
              name: $(".create-form [name='name']").val(),
              pwd: $(".create-form [name='pwd']").val(),
              email: $(".create-form [name='email']").val(),
              tel: $(".create-form [name='tel']").val(),
              gender: $(".create-form [name='gender']:checked").val(),
              limit: $(".create-form [name='limit']").val()
          },
          type: 'post',
          success: function(result) {
             showUserList();
            send(result);
          }
      });
});
// :start submit create
$("#submit-update").click(function(){
    var id = $(".edit-form [name=id]").val();
    if(!id){
        send("ID is required");
        return;
    }
    $.ajax({
          url: '/api/users/'+id,
          data:{
              name: $(".edit-form [name='name']").val(),
              pwd: $(".edit-form [name='pwd']").val(),
              email: $(".edit-form [name='email']").val(),
              tel: $(".edit-form [name='tel']").val(),
              gender: $(".edit-form [name='gender']:checked").val(),
              limit: $(".edit-form [name='limit']").val()
          },
          type: 'put',
          success: function(result) {
             showUserList();
            send(result);
          }
      });
});
// :start list show
showUserList();
function showUserList(){
    $.get("/api/users/", function(data){
        var reslt ="";
        if(!data){
            return;
        }
        for(var i in data){
            var json = data[i];
            reslt += "<tr>"+
            "<td>"+json.name+"</td>"+
            "<td>"+json.pwd+"</td>"+
            "<td>"+json.email+"</td>"+
            "<td>"+json.tel+"</td>"+
            "<td>"+json.gender+"</td>"+
            "<td>"+json.limit+"</td>"+
            "<td>";
            if(json.limit != "0"){
                reslt +="<button class='del-user' data-ids="+json._id+">del</button>";
            }
            reslt += "<button class='edit-user' data-ids="+json._id+">edit</button>"+
                          "</td></tr>";
        }

        $("#user-list").html("").append(reslt);
    })
}
// :start delete user
$(document).on("click", ".del-user", function(){
    var $this = $(this),
        id = $this.data("ids");

        $.ajax({
              url: '/api/users/'+id,
              type: 'DELETE',
              success: function(result) {
                showUserList();
              }
          });
})
// :start edit user
$(document).on("click", ".edit-user", function(){
    var $this = $(this),
        id = $this.data("ids"),
        getVal = function(index){
            return $("td:eq("+index+")",$this.parents("tr"));
        };

        $(".edit-form [name='id']").val(id);
        $(".edit-form [name='name']").val(getVal(0).html());
        $(".edit-form [name='email']").val(getVal(2).html());
        $(".edit-form [name='tel']").val(getVal(3).html());
        $(".edit-form [name='gender'][value='"+getVal(4).html()+"']").click();
        $(".edit-form [name='limit']").val(getVal(5).html());

})



</script>
